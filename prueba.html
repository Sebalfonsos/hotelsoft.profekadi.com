<!DOCTYPE html>
<html>

<head>
</head>

<body>
    <h1>Checkboxes</h1>
    <input pertenece="guacamaya" type="checkbox" id="checkbox1"> Checkbox 1
    <input pertenece="guacamaya" type="checkbox" id="checkbox2"> Checkbox 2
    <input pertenece="guacamaya" type="checkbox" id="checkbox3"> Checkbox 3
    <input pertenece="guacamaya" type="checkbox" id="checkbox4"> Checkbox 4
    <input pertenece="miloco" type="checkbox" id="checkbox5"> Checkbox 5

    <button onclick="detectarCambios('guacamaya')" id="guardarCambios">Guardar Cambios</button>

    <script>
        // Lista para almacenar el estado inicial de los checkboxes
        const initialState = {};

        // Función para guardar el estado inicial de los checkboxes
        function guardarEstadoInicial() {
            // Obtener todos los checkboxes
            const checkboxes = document.querySelectorAll('input[pertenece]');

            checkboxes.forEach(checkbox => {
                // Obtener el valor del atributo 'pertenece' para identificar la categoría
                const categoria = checkbox.getAttribute('pertenece');

                // Si la categoría aún no existe en initialState, crear un objeto vacío para ella
                if (!initialState[categoria]) {
                    initialState[categoria] = {};
                }

                // Almacenar el estado del checkbox en la categoría correspondiente
                initialState[categoria][checkbox.id] = checkbox.checked;
            });
        }

        // Función para detectar cambios en los checkboxes y mostrarlos en la consola
        function detectarCambios(categoria) {
            const cambios = [];
            const checkboxes = document.querySelectorAll(`input[pertenece="${categoria}"]`);

            checkboxes.forEach(checkbox => {
                const estadoInicial = initialState[categoria] && initialState[categoria][checkbox.id];
                const estadoActual = checkbox.checked;

                if (estadoInicial !== undefined && estadoInicial !== estadoActual) {
                    cambios.push(checkbox.id);
                }
            });

            console.log(`Checkboxes en la categoría '${categoria}' que cambiaron de estado: ` + cambios.join(', '));
            guardarEstadoInicial();
        }



        // Guardar el estado inicial al cargar la página
        guardarEstadoInicial();

        // Agregar un evento al botón "Guardar Cambios" para detectar los cambios
        
    </script>
</body>

</html>